generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Users {
  id           Int         @id @default(autoincrement())
  name         String      @db.VarChar(45)
  email        String      @unique(map: "Email_UNIQUE") @db.VarChar(45)
  password        String      @db.VarChar(255)
  avatar       String?     @db.VarChar(100)
  refreshToken String?     @db.Text

  contas       Accounts[]
  transacoes   Transacoes[]
}

model Accounts {
  id       Int      @id @default(autoincrement())
  name     String   @db.VarChar(100)
  type     String   @db.VarChar(45)
  balance    Decimal  @db.Decimal(10,2)
  icon     String?   @db.VarChar(100)

  userId   Int
  usuario  Users    @relation(fields: [userId], references: [id])

  transacoes Transacoes[]
}

model FormasPagamento {
  id          Int          @id @default(autoincrement())
  nome        String       @db.VarChar(100)
  transacoes  Transacoes[]
}

model Transacoes {
  id                   Int           @id @default(autoincrement())
  tipo                 TipoTransacao
  nome                 String        @db.VarChar(255)
  categoria            String        @db.VarChar(100)
  subcategoria         String?       @db.VarChar(100)
  valor                Decimal       @db.Decimal(10,2)
  data_pagamento       DateTime      @db.Date
  dia_cobranca         Int?
  quantidade_parcelas  Int?
  recorrente           Boolean       @default(false)

  contaId              Int
  conta                Accounts        @relation(fields: [contaId], references: [id])

  formaPagamentoId     Int
  formaPagamento       FormasPagamento @relation(fields: [formaPagamentoId], references: [id])

  userId               Int
  usuario              Users         @relation(fields: [userId], references: [id])
}

enum TipoTransacao {
  despesa
  receita
}